<?xml version="1.0" encoding="UTF-8"?>
<UpdateRoot xmlns="N_DATA_MODEL_HLFT" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			testId="TS_RNP-046-02"
			testTitle="RNP Approach Containment Monitoring (approach type indicator)"
			testObjective="This test checks that SKYRADAR generates RNP containment violation alerts only when the track is executing an RNP or RNP_AR approach procedure.&#xa;
			Conditions for RNP containment violation alert generation are:&#xa;
1) The RNP monitoring system status is equal to OPERATIONAL. &#xa;
2) The track is executing an RNP approach procedure with approach type RNP or RNP_AR. &#xa;
3) The track flight plan indicates the aircraft RNP capability value is adequate for the published procedure. &#xa;
4) The track lateral deviation from the published RNP approach path exceeds the RNP containment limit. &#xa;
5) The track is located within the RNP procedure coverage volume (final approach segment beyond FAF). &#xa;
6) The track GNSS integrity status is AVAILABLE with HPL less than the alert limit. &#xa;
7) The flag RNP_VISUAL_OVERRIDE is false or the track has not reported visual conditions.&#xa;
- 1st step: Approach type is ILS (Instrument Landing System), this should NOT generate RNP containment violation alert.&#xa;
- 2nd step: Approach type is changed to RNP, this should generate RNP containment violation alert.&#xa;
- 3rd step: Approach type is changed to RNP_AR, this should continue generating RNP containment violation alert.&#xa;
- 4th step: Approach type is changed to RNAV (non-RNP), this should NOT generate RNP containment violation alert.&#xa;

All conditions, except the 2nd one (approach type), are met to generate RNP containment violation alert. RNP_VISUAL_OVERRIDE = false."
			requirement1="SKYRADAR-RNP-046" requirementCMATS1="SKYRADAR-RNP-046"
			historyDate1="15/09/2024"
			historyEcrId1="FRSKYRADAR-8200"
			historyVersion1="1.0"
			actionComment="Aircraft DLH450 is on approach to runway 20C with lateral deviation exceeding normal limits. Initially on ILS approach."
			actionDescription="Aircraft DLH450 is executing approach with excessive lateral deviation. All conditions to generate RNP containment violation alert are fulfilled except the second one (approach type is ILS, not RNP/RNP_AR).&#xa;
			As a result, no RNP containment violation alert should be generated.">

	<!-- Flight Plan Setup: Initial ILS approach to runway 20C -->
	<FlightPlanUpdate recNum="1" time="1000" callsign="DLH450" cfl="1500" cflUnity="F"
	                  arrivalRwy="20C" arrivalAirport="WSSS" isControlled="true" flightRules="I"/>

	<!-- Ident Update: Associate track with flight plan -->
	<IdentUpdate recNum="1" time="2000" callsign="DLH450" couplingStatus="AUTO" fplNum="1" sysTrackNum="1"/>

	<!-- System Configuration: RNP monitoring system OPERATIONAL -->
	<SystemConfigUpdate time="3000">
		<RNPMonitoringConfig status="OPERATIONAL"/>
		<RNPProcedureDatabase>
			<Procedure runway="20C" approachType="RNP" requiredRNP="0.3"/>
		</RNPProcedureDatabase>
		<SystemParameter name="RNP_VISUAL_OVERRIDE" value="false"/>
		<SystemParameter name="RNP_DEVIATION_TIME_THRESHOLD" value="5" unit="seconds"/>
	</SystemConfigUpdate>

	<!-- Track Update: Aircraft on ILS approach with lateral deviation -->
	<TrackUpdates time="5000">
		<TrackUpdate trackNumber="1" measFlightLevel="1500" measFlightLevelAge="0"
		             posX="103.9970" posY="1.3806" cartSpeedX="80" cartSpeedY="-100"
		             identStr="1" baroAltitude="1500" baroAltitudeQNHCor="0" rocRodRate="-350">
			<Mode3A value="3421"/>
			<FlightPlan callsign="DLH450" ifpsFlightId="1" airportArr="WSSS"
			           flightCatFr1Fr2="3" runway="20C" aircraftRNPCapability="0.3"/>
			<RNPData approachType="ILS" approachSegment="FINAL"
			        lateralDeviation="0.70" deviationExceededDuration="7"
			        publishedPathDistance="4.8"/>
			<GNSSData integrityStatus="AVAILABLE" hpl="0.18" satelliteCount="11" quality="HIGH"/>
			<VisualConditions reported="false" runwayInSight="false"/>
			<Ident sac="118" sic="220"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<!-- Test Result 1: ILS approach - No alert expected -->
	<TestResult resultTimeInMilliSec="5000"
	            resultDescription="Approach type is ILS (not RNP/RNP_AR). No RNP containment violation alert should be generated."
	            nextActionComment="Approach type is updated to RNP at time 10000.&#xa;
	            Aircraft continues with excessive lateral deviation."
	            nextActionDescription="Approach type transitions to RNP. All conditions for RNP containment violation alert are now met. Alert should be generated.">
		<Alerts alertType="RNP_CONTAINMENT_VIOLATION" trackNum="1" alertGenerated="false"/>
	</TestResult>

	<!-- Track Update: Approach type changes to RNP -->
	<TrackUpdates time="10000">
		<TrackUpdate trackNumber="1" measFlightLevel="1350" measFlightLevelAge="0"
		             posX="103.9940" posY="1.3760" cartSpeedX="80" cartSpeedY="-100"
		             identStr="1" baroAltitude="1350" baroAltitudeQNHCor="0" rocRodRate="-350">
			<Mode3A value="3421"/>
			<FlightPlan callsign="DLH450" ifpsFlightId="1" airportArr="WSSS"
			           flightCatFr1Fr2="3" runway="20C" aircraftRNPCapability="0.3"/>
			<RNPData approachType="RNP" approachSegment="FINAL"
			        lateralDeviation="0.72" deviationExceededDuration="12"
			        publishedPathDistance="3.5"/>
			<GNSSData integrityStatus="AVAILABLE" hpl="0.19" satelliteCount="11" quality="HIGH"/>
			<VisualConditions reported="false" runwayInSight="false"/>
			<Ident sac="118" sic="220"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<!-- Test Result 2: RNP approach - Alert expected -->
	<TestResult resultTimeInMilliSec="10000"
	            resultDescription="Approach type is RNP. RNP containment violation alert should be generated."
	            nextActionComment="Approach type is updated to RNP_AR at time 15000.&#xa;
	            Aircraft continues with excessive lateral deviation."
	            nextActionDescription="Approach type transitions to RNP_AR. Alert should continue to be generated.">
		<Alerts alertType="RNP_CONTAINMENT_VIOLATION" trackNum="1" alertGenerated="true">
			<RNPAlert alertReason="LATERAL_DEVIATION_EXCEEDED"
			         lateralDeviation="0.72" containmentLimit="0.6"
			         exceedanceDuration="12" requiredRNP="0.3"/>
		</Alerts>
	</TestResult>

	<!-- Track Update: Approach type changes to RNP_AR -->
	<TrackUpdates time="15000">
		<TrackUpdate trackNumber="1" measFlightLevel="1200" measFlightLevelAge="0"
		             posX="103.9910" posY="1.3710" cartSpeedX="80" cartSpeedY="-100"
		             identStr="1" baroAltitude="1200" baroAltitudeQNHCor="0" rocRodRate="-350">
			<Mode3A value="3421"/>
			<FlightPlan callsign="DLH450" ifpsFlightId="1" airportArr="WSSS"
			           flightCatFr1Fr2="3" runway="20C" aircraftRNPCapability="0.3"/>
			<RNPData approachType="RNP_AR" approachSegment="FINAL"
			        lateralDeviation="0.68" deviationExceededDuration="17"
			        publishedPathDistance="2.3"/>
			<GNSSData integrityStatus="AVAILABLE" hpl="0.17" satelliteCount="11" quality="HIGH"/>
			<VisualConditions reported="false" runwayInSight="false"/>
			<Ident sac="118" sic="220"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<!-- Test Result 3: RNP_AR approach - Alert expected -->
	<TestResult resultTimeInMilliSec="15000"
	            resultDescription="Approach type is RNP_AR. RNP containment violation alert should be generated."
	            nextActionComment="Approach type is updated to RNAV (non-RNP) at time 20000.&#xa;
	            Aircraft continues with excessive lateral deviation."
	            nextActionDescription="Approach type transitions to RNAV. Alert should no longer be generated.">
		<Alerts alertType="RNP_CONTAINMENT_VIOLATION" trackNum="1" alertGenerated="true">
			<RNPAlert alertReason="LATERAL_DEVIATION_EXCEEDED"
			         lateralDeviation="0.68" containmentLimit="0.6"
			         exceedanceDuration="17" requiredRNP="0.3"/>
		</Alerts>
	</TestResult>

	<!-- Track Update: Approach type changes to RNAV (non-RNP) -->
	<TrackUpdates time="20000">
		<TrackUpdate trackNumber="1" measFlightLevel="1000" measFlightLevelAge="0"
		             posX="103.9890" posY="1.3680" cartSpeedX="80" cartSpeedY="-100"
		             identStr="1" baroAltitude="1000" baroAltitudeQNHCor="0" rocRodRate="-350">
			<Mode3A value="3421"/>
			<FlightPlan callsign="DLH450" ifpsFlightId="1" airportArr="WSSS"
			           flightCatFr1Fr2="3" runway="20C" aircraftRNPCapability="0.3"/>
			<RNPData approachType="RNAV" approachSegment="FINAL"
			        lateralDeviation="0.65" deviationExceededDuration="22"
			        publishedPathDistance="1.5"/>
			<GNSSData integrityStatus="AVAILABLE" hpl="0.20" satelliteCount="11" quality="HIGH"/>
			<VisualConditions reported="false" runwayInSight="false"/>
			<Ident sac="118" sic="220"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<!-- Test Result 4: RNAV approach - No alert expected -->
	<TestResult resultTimeInMilliSec="20000"
	            resultDescription="Approach type is RNAV (not RNP/RNP_AR). No RNP containment violation alert should be generated.">
		<Alerts alertType="RNP_CONTAINMENT_VIOLATION" trackNum="1" alertGenerated="false"/>
	</TestResult>
</UpdateRoot>
