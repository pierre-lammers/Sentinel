<?xml version="1.0" encoding="UTF-8"?>
<UpdateRoot xmlns="N_DATA_MODEL_HLFT" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		testId="TS_DMAN-048-01"
		testTitle="Generation of DMAN slot violation alerts (slot tolerance threshold validation)"
		testObjective="This test checks that SKYRADAR generates DMAN slot violation alerts when the calculated actual take-off time prediction exceeds the assigned TTOT by more than DMAN_SLOT_TOLERANCE.&#xa;
		Conditions for DMAN slot violation alert generation are:&#xa;
1) The DMAN system status is equal to OPERATIONAL. &#xa;
2) The track has an assigned Target Take-Off Time (TTOT) with departure sequence position allocated by DMAN. &#xa;
3) The track is in DEPARTURE_GROUND or DEPARTURE_TAXI flight phase with valid ground position data. &#xa;
4) The calculated actual take-off time prediction exceeds the assigned TTOT by more than DMAN_SLOT_TOLERANCE (+/- 5 minutes). &#xa;
5) The departure runway assigned to the track has active DMAN sequencing enabled with current departure demand exceeding DMAN_ACTIVATION_THRESHOLD (8 departures per hour). &#xa;
6) The track departure route or initial departure fix matches one of the DMAN managed flow constraint points defined in DMAN_REGULATED_ROUTES.&#xa;
- 1st step: predicted take-off time is within tolerance (TTOT + 3 min), no DMAN alert should be generated.&#xa;
- 2nd step: predicted take-off time exceeds tolerance (TTOT + 7 min), DMAN alert should be generated.&#xa;
- 3rd step: predicted take-off time is within tolerance again (TTOT + 2 min), no DMAN alert should be generated.&#xa;
&#xa;
TTOT = 08:30:00 UTC (epoch 30600000), DMAN_SLOT_TOLERANCE = 300 seconds (5 minutes). System status = OPERATIONAL."
		requirement1="SKYRADAR-DMAN-048" requirementCMATS1="SKYRADAR-DMAN-048"
		historyDate1="18/11/2024"
		historyDate2="25/11/2024"
		historyEcrId1="CMATS_ISD103"
		historyEcrId2="FRSKYRADAR-9142"
		historyVersion1="5.1"
		actionComment="Track is in DEPARTURE_TAXI phase at runway 27R with TTOT assigned. DMAN system is set to OPERATIONAL."
		actionDescription="Track is in departure taxi phase with predicted take-off time initially within slot tolerance. All conditions for DMAN alert generation are fulfilled except slot tolerance threshold.&#xa;
		As a result, no DMAN alert should be generated.">

	<FlightPlanUpdate recNum="1" time="1" callsign="UAL456" cfl="350" cflUnity="F" departureRwy="27R" departureAirport="LFPG" isControlled="true" flightRules="I" departureRoute="DMAN_ROUTE_NORTH"/>

	<IdentUpdate recNum="1" time="2" callsign="UAL456" couplingStatus="AUTO" fplNum="1" sysTrackNum="1"/>

	<DmanSystemUpdate time="3">
		<DmanStatus status="OPERATIONAL" slotTolerance="300"/>
		<RunwayConfig runway="27R" dmanSequencingEnabled="true" departureRate="12"/>
		<RegulatedRoutes>
			<Route name="DMAN_ROUTE_NORTH" active="true"/>
			<Route name="DMAN_ROUTE_SOUTH" active="true"/>
			<Route name="DMAN_ROUTE_EAST" active="true"/>
		</RegulatedRoutes>
	</DmanSystemUpdate>

	<TrackUpdates time="5">
		<TrackUpdate trackNumber="1" posX="-500" posY="200" groundSpeed="15" identStr="1" flightPhase="DEPARTURE_TAXI" positionQuality="HIGH">
			<Mode3A value="2134"/>
			<FlightPlan callsign="UAL456" ifpsFlightId="1" airportDep="LFPG" runway="27R" departureRoute="DMAN_ROUTE_NORTH"/>
			<DmanData ttot="30600000" sequencePosition="3" predictedTakeoffTime="30780000"/>
			<Ident sac="145" sic="110"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<TestResult resultTimeInMilliSec="7000" resultDescription="No DMAN slot violation alert is generated because predicted take-off time (08:33:00) is within tolerance of TTOT (08:30:00 + 5 min = 08:35:00)."
				nextActionComment="At time 10, track experiences taxi delay. Predicted take-off time becomes 08:37:00, exceeding TTOT + 5 min tolerance.&#xa;
				Track continues in departure taxi phase."
				nextActionDescription="Track's predicted take-off time exceeds slot tolerance. This should trigger a DMAN slot violation alert.">
		<Alerts alertType="DMAN_SLOT_VIOLATION" trackNum="1" alertGenerated="false"/>
	</TestResult>

	<TrackUpdates time="10">
		<TrackUpdate trackNumber="1" posX="-480" posY="210" groundSpeed="8" identStr="1" flightPhase="DEPARTURE_TAXI" positionQuality="HIGH">
			<Mode3A value="2134"/>
			<FlightPlan callsign="UAL456" ifpsFlightId="1" airportDep="LFPG" runway="27R" departureRoute="DMAN_ROUTE_NORTH"/>
			<DmanData ttot="30600000" sequencePosition="3" predictedTakeoffTime="31020000"/>
			<Ident sac="145" sic="110"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<TestResult resultTimeInMilliSec="12000" resultDescription="DMAN slot violation alert is generated because predicted take-off time (08:37:00) exceeds TTOT tolerance (08:30:00 + 5 min = 08:35:00)."
				nextActionComment="At time 15, traffic clears and track speeds up. Predicted take-off time becomes 08:32:00, back within tolerance.&#xa;
				Track continues in departure taxi phase."
				nextActionDescription="Track's predicted take-off time is back within slot tolerance. DMAN alert should be cleared.">
		<Alerts alertType="DMAN_SLOT_VIOLATION" trackNum="1" alertGenerated="true">
			<DmanAlert severity="WARNING" ttot="30600000" predictedTime="31020000" slotDeviation="420" tolerance="300" runway="27R"/>
		</Alerts>
	</TestResult>

	<TrackUpdates time="15">
		<TrackUpdate trackNumber="1" posX="-450" posY="225" groundSpeed="20" identStr="1" flightPhase="DEPARTURE_TAXI" positionQuality="HIGH">
			<Mode3A value="2134"/>
			<FlightPlan callsign="UAL456" ifpsFlightId="1" airportDep="LFPG" runway="27R" departureRoute="DMAN_ROUTE_NORTH"/>
			<DmanData ttot="30600000" sequencePosition="3" predictedTakeoffTime="30720000"/>
			<Ident sac="145" sic="110"/>
			<SysTrkAge ssrAge="0"/>
		</TrackUpdate>
	</TrackUpdates>

	<TestResult resultTimeInMilliSec="17000" resultDescription="No DMAN slot violation alert is generated because predicted take-off time (08:32:00) is within tolerance of TTOT (08:30:00 + 5 min = 08:35:00).">
		<Alerts alertType="DMAN_SLOT_VIOLATION" trackNum="1" alertGenerated="false"/>
	</TestResult>
</UpdateRoot>
